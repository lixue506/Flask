function socket_init() {
    var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function () {
        socket.emit('init', '');
    });
    socket.on('init', function (result) {
        for (var i = 0; i < result.length; i++) {
            $("#main").append(result[i]['username'] + '<br />');
        }
    });
    socket.on('update', function (result) {
        $("#main").append(result['username'] + '<br />');
    });
}